(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-04ab7d0e"],{"455d":function(t,e,n){},"53fe":function(t,e,n){"use strict";n("cb2e")},6637:function(t,e,n){"use strict";n("455d")},be6c:function(t,e,n){"use strict";var a=n("2fa3"),s=function(){return localStorage.getItem("token")};e["a"]={getAllUsers:function(){return a["b"].get("/admin/users",{headers:{Authorization:"Bearer ".concat(s())}})},getAllTweets:function(){return a["b"].get("/admin/tweets",{headers:{Authorization:"Bearer ".concat(s())}})},deleteTweet:function(t){var e=t.tweetId;return a["b"].delete("/admin/tweets/".concat(e),{headers:{Authorization:"Bearer ".concat(s())}})}}},cb2e:function(t,e,n){},e04c:function(t,e,n){"use strict";var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("nav",{staticClass:"d-flex flex-column"},[n("Logo",{staticClass:"mt-3 mb-5"}),n("router-link",{staticClass:"nav-btn d-flex fonSize18 align-items-center",attrs:{to:"/admin/tweets"}},[n("IconHome",{staticClass:"mr-3"}),t._v(" 推文清單 ")],1),n("router-link",{staticClass:"nav-btn d-flex fonSize18 align-items-center",attrs:{to:"/admin/users"}},[n("IconUserProfile",{staticClass:"mr-3"}),t._v(" 使用者列表 ")],1),n("button",{staticClass:"btn sign-out-btn d-flex fonSize18 align-items-center",attrs:{type:"button"},on:{click:t.signOut}},[n("IconSignOut",{staticClass:"mr-3"}),t._v(" 登出 ")],1)],1)},s=[],r=n("2241"),c=n("d64a"),i=n("f73b"),o=n("e78e"),l={components:{Logo:r["a"],IconHome:c["a"],IconUserProfile:i["a"],IconSignOut:o["a"]},methods:{signOut:function(){this.$store.commit("revokeAuthentication"),this.$router.push("/admin/signin")}}},u=l,d=(n("6637"),n("2877")),f=Object(d["a"])(u,a,s,!1,null,"0ca6d3fe",null);e["a"]=f.exports},fa6af:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-auto"},[n("AdminNav")],1),n("div",{staticClass:"panel-right col"},[n("h1",{staticClass:"title"},[t._v("推文清單")]),n("div",{staticClass:"tweets-panel px-3"},[n("div",{staticClass:"row"},t._l(t.tweets,(function(e){return n("div",{key:e.id,staticClass:"col-12"},[n("div",{staticClass:"tweet-card d-flex"},[n("img",{staticClass:"user-avatar",attrs:{src:t._f("emptyImage")(e.User.avatar),alt:"no pic"}}),n("div",{staticClass:"tweet-content"},[n("div",{staticClass:"tweet-content-title d-flex align-items-center mb-1"},[n("span",{staticClass:"user-name"},[t._v(t._s(e.User.name))]),n("span",{staticClass:"user-acount"},[t._v("@"+t._s(e.User.account))]),n("span",{staticClass:"dot fonSize30"},[t._v("⋅")]),n("span",{staticClass:"tweet-create-time"},[t._v(" "+t._s(e.createdAt)+" ")]),n("button",{staticClass:"btn-exit",on:{click:function(n){return t.deleteTweet(e.id)}}},[t._v(" ✕ ")])]),n("p",[t._v(" "+t._s(t._f("contentToLong")(e.description))+" ")])])])])})),0)])])])])},s=[],r=(n("4de4"),n("d81d"),n("96cf"),n("1da1")),c=n("e04c"),i=n("2708"),o=n("be6c"),l=n("2fa3"),u={components:{AdminNav:c["a"]},data:function(){return{tweets:[]}},created:function(){this.fetchTweets()},methods:{fetchTweets:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o["a"].getAllTweets();case 3:n=e.sent,a=n.data,a.map((function(t){t.createdAt=new Date(t.createdAt).toLocaleString()})),t.tweets=a,e.next=13;break;case 9:e.prev=9,e.t0=e["catch"](0),console.log(e.t0),l["a"].fire({icon:"error",title:"無法取得推文，請稍後再試"});case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))()},deleteTweet:function(t){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function n(){var a,s;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(n.prev=0,confirm("確定刪除？")){n.next=3;break}return n.abrupt("return");case 3:return console.log("confirm delete"),n.next=6,o["a"].deleteTweet({tweetId:t});case 6:if(a=n.sent,s=a.data,"success"===s.status){n.next=10;break}throw new Error(s.message);case 10:e.tweets=e.tweets.filter((function(e){return e.id!==t})),n.next=17;break;case 13:n.prev=13,n.t0=n["catch"](0),console.log(n.t0),l["a"].fire({icon:"error",title:"刪除推文失敗，請稍後再試"});case 17:case"end":return n.stop()}}),n,null,[[0,13]])})))()}},mixins:[i["c"],i["d"],i["a"]]},d=u,f=(n("53fe"),n("2877")),m=Object(f["a"])(d,a,s,!1,null,"7ffe2d14",null);e["default"]=m.exports}}]);
//# sourceMappingURL=chunk-04ab7d0e.0170af51.js.map