{"version":3,"sources":["webpack:///./src/views/AdminTweets.vue?bdbc","webpack:///./src/components/AdminNav.vue?8ee3","webpack:///./src/apis/admin.js","webpack:///./src/components/AdminNav.vue?2413","webpack:///src/components/AdminNav.vue","webpack:///./src/components/AdminNav.vue?7a1e","webpack:///./src/components/AdminNav.vue?6e07","webpack:///./src/views/AdminTweets.vue?4d3b","webpack:///src/views/AdminTweets.vue","webpack:///./src/views/AdminTweets.vue?3126","webpack:///./src/views/AdminTweets.vue?3234"],"names":["getToken","localStorage","getItem","getAllUsers","apiHelper","get","headers","Authorization","getAllTweets","deleteTweet","tweetId","delete","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","_v","on","signOut","staticRenderFns","components","Logo","IconHome","IconUserProfile","IconSignOut","methods","$store","commit","$router","push","component","_l","tweet","key","id","_f","User","avatar","_s","name","account","createdAt","$event","description","AdminNav","data","tweets","created","fetchTweets","mixins"],"mappings":"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","file":"js/chunk-04ab7d0e.0170af51.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminTweets.vue?vue&type=style&index=0&id=7ffe2d14&scoped=true&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminNav.vue?vue&type=style&index=0&id=0ca6d3fe&scoped=true&lang=css&\"","import { apiHelper } from './../utils/helpers'\nconst getToken = () => localStorage.getItem('token')\n\nexport default {\n  getAllUsers() {\n    return apiHelper.get('/admin/users', {\n      headers: { Authorization: `Bearer ${getToken()}` }\n    })\n  },\n  getAllTweets() {\n    return apiHelper.get('/admin/tweets', {\n      headers: { Authorization: `Bearer ${getToken()}` }\n    })\n  },\n  deleteTweet({ tweetId }) {\n    return apiHelper.delete(`/admin/tweets/${tweetId}`, {\n      headers: { Authorization: `Bearer ${getToken()}` }\n    })\n  }\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('nav',{staticClass:\"d-flex flex-column\"},[_c('Logo',{staticClass:\"mt-3 mb-5\"}),_c('router-link',{staticClass:\"nav-btn d-flex fonSize18 align-items-center\",attrs:{\"to\":\"/admin/tweets\"}},[_c('IconHome',{staticClass:\"mr-3\"}),_vm._v(\" 推文清單 \")],1),_c('router-link',{staticClass:\"nav-btn d-flex fonSize18 align-items-center\",attrs:{\"to\":\"/admin/users\"}},[_c('IconUserProfile',{staticClass:\"mr-3\"}),_vm._v(\" 使用者列表 \")],1),_c('button',{staticClass:\"btn sign-out-btn d-flex fonSize18 align-items-center\",attrs:{\"type\":\"button\"},on:{\"click\":_vm.signOut}},[_c('IconSignOut',{staticClass:\"mr-3\"}),_vm._v(\" 登出 \")],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <nav class=\"d-flex flex-column\">\n    <Logo class=\"mt-3 mb-5\" />\n    <router-link\n      to=\"/admin/tweets\"\n      class=\"nav-btn d-flex fonSize18 align-items-center\"\n    >\n      <IconHome class=\"mr-3\" />\n      推文清單\n    </router-link>\n    <router-link\n      to=\"/admin/users\"\n      class=\"nav-btn d-flex fonSize18 align-items-center\"\n    >\n      <IconUserProfile class=\"mr-3\" />\n      使用者列表\n    </router-link>\n\n    <button\n      type=\"button\"\n      class=\"btn sign-out-btn d-flex fonSize18 align-items-center\"\n      @click=\"signOut\"\n    >\n      <IconSignOut class=\"mr-3\" />\n      登出\n    </button>\n  </nav>\n</template>\n\n<script>\nimport Logo from './Logo'\nimport IconHome from './IconHome'\nimport IconUserProfile from './IconUserProfile'\nimport IconSignOut from './IconSignOut'\n\nexport default {\n  components: {\n    Logo,\n    IconHome,\n    IconUserProfile,\n    IconSignOut\n  },\n  methods: {\n    signOut() {\n      this.$store.commit('revokeAuthentication')\n      this.$router.push('/admin/signin')\n    }\n  },\n}\n</script>\n\n<style scoped>\nnav {\n  height: 100vh;\n}\n.nav-btn {\n  width: 200px;\n  color: #1c1c1c;\n  font-weight: 700;\n  margin-bottom: 34px;\n}\n.active {\n  color: #ff6600;\n}\n.nav-btn:hover {\n  text-decoration: none;\n}\n.fonSize18 {\n  font-size: 18px;\n}\n.sign-out-btn {\n  width: 200px;\n  margin: auto 0 17px 0;\n  padding: 0;\n  font-weight: 700;\n}\n.sign-out-btn:focus {\n  border-color: transparent;\n  box-shadow: 0 0 0 0.2rem transparent;\n  background: transparent;\n}\n.pointer {\n  cursor: pointer;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminNav.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminNav.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdminNav.vue?vue&type=template&id=0ca6d3fe&scoped=true&\"\nimport script from \"./AdminNav.vue?vue&type=script&lang=js&\"\nexport * from \"./AdminNav.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AdminNav.vue?vue&type=style&index=0&id=0ca6d3fe&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0ca6d3fe\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"container\"},[_c('div',{staticClass:\"row\"},[_c('div',{staticClass:\"col-auto\"},[_c('AdminNav')],1),_c('div',{staticClass:\"panel-right col\"},[_c('h1',{staticClass:\"title\"},[_vm._v(\"推文清單\")]),_c('div',{staticClass:\"tweets-panel px-3\"},[_c('div',{staticClass:\"row\"},_vm._l((_vm.tweets),function(tweet){return _c('div',{key:tweet.id,staticClass:\"col-12\"},[_c('div',{staticClass:\"tweet-card d-flex\"},[_c('img',{staticClass:\"user-avatar\",attrs:{\"src\":_vm._f(\"emptyImage\")(tweet.User.avatar),\"alt\":\"no pic\"}}),_c('div',{staticClass:\"tweet-content\"},[_c('div',{staticClass:\"tweet-content-title d-flex align-items-center mb-1\"},[_c('span',{staticClass:\"user-name\"},[_vm._v(_vm._s(tweet.User.name))]),_c('span',{staticClass:\"user-acount\"},[_vm._v(\"@\"+_vm._s(tweet.User.account))]),_c('span',{staticClass:\"dot fonSize30\"},[_vm._v(\"⋅\")]),_c('span',{staticClass:\"tweet-create-time\"},[_vm._v(\" \"+_vm._s(tweet.createdAt)+\" \")]),_c('button',{staticClass:\"btn-exit\",on:{\"click\":function($event){return _vm.deleteTweet(tweet.id)}}},[_vm._v(\" ✕ \")])]),_c('p',[_vm._v(\" \"+_vm._s(_vm._f(\"contentToLong\")(tweet.description))+\" \")])])])])}),0)])])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"container\">\n    <div class=\"row\">\n      <div class=\"col-auto\">\n        <AdminNav />\n      </div>\n      <div class=\"panel-right col\">\n        <h1 class=\"title\">推文清單</h1>\n        <div class=\"tweets-panel px-3\">\n          <div class=\"row\">\n            <div v-for=\"tweet in tweets\" :key=\"tweet.id\" class=\"col-12\">\n              <div class=\"tweet-card d-flex\">\n                <img\n                  class=\"user-avatar\"\n                  :src=\"tweet.User.avatar | emptyImage\"\n                  alt=\"no pic\"\n                />\n                <div class=\"tweet-content\">\n                  <div\n                    class=\"tweet-content-title d-flex align-items-center mb-1\"\n                  >\n                    <span class=\"user-name\">{{ tweet.User.name }}</span>\n                    <span class=\"user-acount\"\n                      >&#64;{{ tweet.User.account }}</span\n                    >\n                    <span class=\"dot fonSize30\">&#8901;</span>\n                    <span class=\"tweet-create-time\">\n                      {{ tweet.createdAt }}\n                    </span>\n                    <button class=\"btn-exit\" @click=\"deleteTweet(tweet.id)\">\n                      &#10005;\n                    </button>\n                  </div>\n                  <p>\n                    {{ tweet.description | contentToLong }}\n                  </p>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport AdminNav from './../components/AdminNav'\nimport { emptyImageFilter } from '../utils/mixins'\nimport { fromNowFilter } from '../utils/mixins'\nimport { contentLengthFilter } from '../utils/mixins'\nimport adminAPI from './../apis/admin'\nimport { Toast } from './../utils/helpers'\n\nexport default {\n  components: {\n    AdminNav\n  },\n  data() {\n    return {\n      tweets: []\n    }\n  },\n  created() {\n    this.fetchTweets()\n  },\n  methods: {\n    async fetchTweets() {\n      try {\n        const { data } = await adminAPI.getAllTweets()\n        data.map(tweet => {\n          tweet.createdAt = new Date(tweet.createdAt).toLocaleString()\n        })\n        this.tweets = data\n\n      } catch (error) {\n        console.log(error)\n        Toast.fire({\n          icon: 'error',\n          title: '無法取得推文，請稍後再試'\n        })\n      }\n    },\n    async deleteTweet(tweetId) {\n      try {\n        if (!confirm('確定刪除？')) {\n          return\n        }\n\n        console.log('confirm delete')\n\n        const { data } = await adminAPI.deleteTweet({ tweetId })\n\n        if (data.status !== 'success') {\n          throw new Error(data.message)\n        }\n\n        this.tweets = this.tweets.filter(tweet =>\n          tweet.id !== tweetId\n        )\n\n      } catch (error) {\n        console.log(error)\n        Toast.fire({\n          icon: 'error',\n          title: '刪除推文失敗，請稍後再試'\n        })\n      }\n    }\n  },\n  mixins: [emptyImageFilter, fromNowFilter, contentLengthFilter],\n}\n</script>\n\n<style scoped>\n.panel-right {\n  height: 100vh;\n}\n.title {\n  border-left: 1px solid #e6ecf0;\n  border-right: 1px solid #e6ecf0;\n  color: #1c1c1c;\n  font-size: 18px;\n  font-weight: 700;\n  line-height: 55px;\n  padding-left: 25px;\n  margin: 0;\n}\n.user-avatar {\n  width: 50px;\n  height: 50px;\n  object-fit: cover;\n  border-radius: 50%;\n  margin: 15px 15px 0 0;\n}\n.col-12 {\n  border-bottom: 1px solid #e6ecf0;\n  padding-bottom: 15px;\n}\n.tweet-card {\n  position: relative;\n  border-radius: 10px;\n  width: 100%;\n}\n.panel-right {\n  position: relative;\n  height: 100vh;\n}\n.tweets-panel {\n  position: absolute;\n  top: 55px;\n  bottom: 0px;\n  left: 15px;\n  right: 15px;\n  border: 1px solid #e6ecf0;\n  border-bottom: 0;\n  overflow: scroll;\n}\n.tweet-content {\n  margin-top: 12px;\n  width: 100%;\n}\n.tweet-content-title {\n  position: relative;\n  height: 20px;\n}\n.user-name {\n  font-size: 15px;\n  font-weight: 700;\n  margin-right: 5px;\n}\n.user-acount,\n.tweet-create-time {\n  margin-right: 3px;\n  font-size: 15px;\n  font-weight: 500;\n  color: #657786;\n}\n.dot {\n  position: relative;\n  top: 0px;\n  color: #657786;\n  font-size: 20px;\n  margin-right: 3px;\n}\n.btn-exit {\n  position: absolute;\n  top: 0;\n  right: 0;\n  display: block;\n  height: 20px;\n  width: 20px;\n  line-height: 20px;\n  color: #657786;\n  border: none;\n  background: none;\n  padding: 0;\n}\np {\n  width: 97%;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminTweets.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./AdminTweets.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./AdminTweets.vue?vue&type=template&id=7ffe2d14&scoped=true&\"\nimport script from \"./AdminTweets.vue?vue&type=script&lang=js&\"\nexport * from \"./AdminTweets.vue?vue&type=script&lang=js&\"\nimport style0 from \"./AdminTweets.vue?vue&type=style&index=0&id=7ffe2d14&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"7ffe2d14\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}