(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-85706024"],{"23d6":function(e,t,s){"use strict";s("47ca")},"47ca":function(e,t,s){},"63bf":function(e,t,s){"use strict";s("fa6a")},"6f1a":function(e,t,s){"use strict";s.r(t);var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"container"},[s("div",{staticClass:"row"},[s("div",{staticClass:"col-auto left-container component-navbar left-area-rwd"},[s("Navbar")],1),s("div",{staticClass:"col main-container main-area-rwd vh100scroll"},[s("UserTweet",{attrs:{initialUserTweet:e.userTweet},on:{"after-reply-tweet":e.afterReplyTweet}}),s("TweetReplies",{attrs:{initialTweetReplies:e.tweetReplies,initialUserTweet:e.userTweet}})],1),s("div",{staticClass:"col-auto right-container right-area-rwd"},[s("TopFollowersUser",{staticClass:"component-top-followers-user"})],1)])])},r=[],i=(s("96cf"),s("1da1")),n=s("5530"),c=s("d178"),l=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"replies-box"},e._l(e.tweetReplies,(function(t){return s("div",{key:t.id,staticClass:"replyer"},[s("router-link",{attrs:{to:{name:"user",params:{userId:t.User.id}}}},[s("img",{staticClass:"replyer-avator",attrs:{src:t.User.avatar||"https://i.imgur.com/S4PE66O.png",alt:""}})]),s("div",{staticClass:"reply-detail"},[s("div",{staticClass:"replyer-info"},[s("router-link",{attrs:{to:{name:"user",params:{userId:t.User.id}}}},[s("div",{staticClass:"replyer-name"},[e._v(e._s(t.User.name))])]),s("div",{staticClass:"at-detail"},[s("span",{staticClass:"replyer-at"},[e._v(" @"+e._s(t.User.account))]),s("span",[e._v("・")]),s("span",{staticClass:"reply-time"},[e._v(e._s(e._f("fromNow")(t.createdAt)))])])],1),s("div",[s("span",{staticClass:"reply"},[e._v("回覆")]),s("span",{staticClass:"reply-to-user-at"},[e._v("@"+e._s(e.userTweet.User.account))])]),s("div",{staticClass:"reply-text"},[e._v(e._s(t.comment))])])],1)})),0)},o=[],u=s("c1df"),d=s.n(u),p={props:{initialTweetReplies:{type:Array,required:!0},initialUserTweet:{type:Object,required:!0}},data:function(){return{tweetReplies:this.initialTweetReplies,userTweet:this.initialUserTweet}},watch:{initialTweetReplies:function(e){this.tweetReplies=e},initialUserTweet:function(e){this.userTweet=e}},filters:{fromNow:function(e){return e?d()(e).fromNow():"-"}}},w=p,m=(s("63bf"),s("2877")),v=Object(m["a"])(w,l,o,!1,null,"a1c30e82",null),f=v.exports,C=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"main-user-container"},[s("div",[s("router-link",{staticClass:"previous-page",attrs:{to:"/"}},[s("div",{staticClass:"arrow-icon"},[s("ArrowIcon")],1),s("div",{staticClass:"title"},[e._v("推文")])])],1),s("div",{staticClass:"user-area"},[s("div",{staticClass:"user-detail"},[s("router-link",{attrs:{to:{name:"user",params:{userId:e.userTweet.User.id}}}},[s("img",{staticClass:"user-avator",attrs:{src:e.userTweet.User.avatar||"https://i.imgur.com/S4PE66O.png",alt:""}})]),s("span",{staticClass:"connect-line"}),s("div",{staticClass:"reply-detail"},[s("router-link",{attrs:{to:{name:"user",params:{userId:e.userTweet.User.id}}}},[s("div",{staticClass:"user-name"},[e._v(e._s(e.userTweet.User.name))])]),s("div",[s("span",{staticClass:"user-self-at"},[e._v("@"+e._s(e.userTweet.User.account))])])],1)],1),s("div",{staticClass:"tweet-text"},[s("p",[e._v(" "+e._s(e.userTweet.description)+" ")])]),s("div",{staticClass:"tweet-upload-time"},[s("div",[e._v(e._s(e._f("dateInMandarin")(e.userTweet.createdAt)))])]),s("div",{staticClass:"count-container"},[s("div",{staticClass:"count-info"},[s("p",{staticClass:"replies-count"},[e._v(e._s(e.userTweet.repliesCount))]),s("p",{staticClass:"count-title"},[e._v("回覆")])]),s("div",{staticClass:"count-info"},[s("p",{staticClass:"likes-count"},[e._v(e._s(e.userTweet.likesCount))]),s("p",{staticClass:"count-title"},[e._v("喜歡次數")])])]),s("div",{staticClass:"reply-and-like-btn-container"},[s("div",[s("button",{staticClass:"btn-reply",attrs:{type:"button","data-toggle":"modal","data-target":"#replyModal"}},[s("ReplyIcon",{staticClass:"reply-icon"})],1)]),s("div",[e.userTweet.isLiked?s("button",{staticClass:"btn-unlike",attrs:{type:"button"},on:{click:function(t){return e.deleteLike(e.userTweet.id)}}},[s("IconLikeFill",{staticClass:"unlike-icon"})],1):s("button",{staticClass:"btn-like",attrs:{type:"button"},on:{click:function(t){return e.addLike(e.userTweet.id)}}},[s("LikeIcon",{staticClass:"like-icon"})],1)])])]),s("div",{staticClass:"modal fade",attrs:{id:"replyModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[s("div",{staticClass:"modal-dialog"},[s("div",{staticClass:"modal-content"},[e._m(0),s("div",{staticClass:"modal-body"},[s("div",{staticClass:"tweet-container"},[s("img",{staticClass:"avator",attrs:{src:e.userTweet.User.avatar||"https://i.imgur.com/S4PE66O.png",alt:""}}),s("div",{staticClass:"detail"},[s("div",{staticClass:"info"},[s("div",{staticClass:"name"},[e._v(e._s(e.userTweet.User.name))]),s("div",{staticClass:"at-detail"},[s("span",{staticClass:"tweet-at"},[e._v(" @"+e._s(e.userTweet.User.account))]),s("span",[e._v("・")]),s("span",{staticClass:"reply-time"},[e._v(e._s(e._f("fromNow")(e.userTweet.createdAt)))])])]),s("div",[s("span",{staticClass:"reply"},[e._v("回覆給")]),s("span",{staticClass:"reply-to-user-at"},[e._v("@"+e._s(e.userTweet.User.account))])]),s("div",{staticClass:"tweet-text"},[e._v(e._s(e.userTweet.description))])])]),s("div",{staticClass:"d-flex"},[s("img",{attrs:{src:e.currentUser.avatar||"https://i.imgur.com/S4PE66O.png",alt:"no photo"}}),s("form",{staticClass:"d-flex flex-column w-100",on:{submit:function(e){e.stopPropagation(),e.preventDefault()}}},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.comment,expression:"comment"}],staticClass:"form-textarea w-100",attrs:{name:"text",id:"replyTweet",rows:"6",placeholder:"回覆貼文",autofocus:""},domProps:{value:e.comment},on:{input:function(t){t.target.composing||(e.comment=t.target.value)}}}),s("button",{staticClass:"btn-reply-submit align-self-end",attrs:{type:"submit","data-dismiss":"modal"},on:{click:function(t){return e.handleReplySubmit(e.userTweet.id)}}},[e._v(" 推文 ")])])])])])])])])},b=[function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"modal-header"},[s("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[s("div",{staticClass:"btn-cancel pointer"})])])}],h=(s("498a"),s("d1bc")),T=s("c182"),_=s("6c6b"),g=s("bb67"),k=s("2fa3"),y=s("1602"),x=s("7482"),U=s("2f62"),R={components:{ArrowIcon:h["a"],ReplyIcon:T["a"],LikeIcon:_["a"],IconLikeFill:g["a"]},props:{initialUserTweet:{type:Object,required:!0}},data:function(){return{userTweet:this.initialUserTweet,comment:"",createdAt:-1}},computed:Object(n["a"])({},Object(U["b"])(["currentUser","isAuthenticated"])),created:function(){},watch:{initialUserTweet:function(e){this.userTweet=e}},methods:{handleReplySubmit:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:if(t.createdAt=Date.now(),""!==t.comment.trim()){s.next=6;break}return k["a"].fire({icon:"error",title:"親愛的用戶，請勿發空空的思念。"}),s.abrupt("return");case 6:if(!(t.comment.length>140)){s.next=9;break}return k["a"].fire({icon:"error",title:"推文字數超過140囉！"}),s.abrupt("return");case 9:return s.prev=9,s.next=12,y["a"].addUserReply({tweetId:e,comment:t.comment,createdAt:t.createdAt});case 12:if(a=s.sent,"success"===a.data.status){s.next=15;break}throw new Error(a.data.message);case 15:t.userTweet.repliesCount++,t.$emit("after-reply-tweet",{tweetId:e,comment:t.comment,createdAt:t.createdAt}),t.comment="",s.next=24;break;case 20:s.prev=20,s.t0=s["catch"](9),console.log(s.t0),k["a"].fire({icon:"error",title:"無法發送回覆，請稍後再試"});case 24:case"end":return s.stop()}}),s,null,[[9,20]])})))()},addLike:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,x["a"].addTweetLike({tweetId:e});case 3:if(a=s.sent,console.log(">>>>>>>>>",a),"success"===a.data.status){s.next=7;break}throw new Error(a.data.message);case 7:t.userTweet.likesCount++,t.userTweet.isLiked=!0,s.next=15;break;case 11:s.prev=11,s.t0=s["catch"](0),console.log(s.t0),k["a"].fire({icon:"error",title:"無法點愛心，請稍後再試"});case 15:case"end":return s.stop()}}),s,null,[[0,11]])})))()},deleteLike:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var a;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,x["a"].deleteTweetLike({tweetId:e});case 3:if(a=s.sent,console.log(a),"success"===a.data.status){s.next=7;break}throw new Error(a.data.message);case 7:t.userTweet.likesCount--,t.userTweet.isLiked=!1,s.next=15;break;case 11:s.prev=11,s.t0=s["catch"](0),console.log(s.t0),k["a"].fire({icon:"error",title:"無法取消愛心，請稍後再試"});case 15:case"end":return s.stop()}}),s,null,[[0,11]])})))()}},filters:{dateInMandarin:function(e){if(!e)return"-";var t=d()(e).calendar();return t},fromNow:function(e){return e?d()(e).fromNow():"-"}}},I=R,O=(s("23d6"),Object(m["a"])(I,C,b,!1,null,"d0ccb4f2",null)),L=O.exports,j=s("f4b3"),A=s("ec26"),E={components:{TweetReplies:f,TopFollowersUser:j["a"],UserTweet:L,Navbar:c["a"]},data:function(){return{userTweet:{},tweetReplies:[]}},computed:Object(n["a"])({},Object(U["b"])(["currentUser","isAuthenticated"])),created:function(){var e=this.$route.params;this.fetchUserTweet(e),this.fetchTweetReplies(e)},methods:{fetchUserTweet:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,x["a"].getUserTweet(e);case 3:a=s.sent,r=a.data,t.userTweet=r,console.log("this.userTweet",t.userTweet),s.next=13;break;case 9:s.prev=9,s.t0=s["catch"](0),console.log(s.t0),k["a"].fire({icon:"error",title:"無法取得使用者資料，請稍後再試"});case 13:case"end":return s.stop()}}),s,null,[[0,9]])})))()},fetchTweetReplies:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function s(){var a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,x["a"].getTweetReplies(e);case 3:a=s.sent,r=a.data,t.tweetReplies=r,console.log("this.tweetReplies",t.tweetReplies),s.next=13;break;case 9:s.prev=9,s.t0=s["catch"](0),console.log(s.t0),k["a"].fire({icon:"error",title:"無法取得該文回覆資料，請稍後再試"});case 13:case"end":return s.stop()}}),s,null,[[0,9]])})))()},afterReplyTweet:function(e){var t=e.tweetId,s=e.comment,a=e.createdAt;this.tweetReplies.unshift({User:this.currentUser,tweetId:t,comment:s,createdAt:a,id:Object(A["a"])()})}}},N=E,$=Object(m["a"])(N,a,r,!1,null,"4a95eb00",null);t["default"]=$.exports},d1bc:function(e,t,s){"use strict";var a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"17",height:"14",viewBox:"0 0 17 14",fill:"none"}},[s("path",{attrs:{d:"M16 5.99988H3.41399L7.70699 1.70687C8.09699 1.31687 8.09699 0.683875 7.70699 0.292875C7.31699 -0.0981249 6.68399 -0.0971249 6.29299 0.292875L0.292988 6.29288C-0.0970117 6.68288 -0.0970117 7.31588 0.292988 7.70687L6.29299 13.7069C6.48799 13.9019 6.74299 13.9999 6.99999 13.9999C7.25699 13.9999 7.51199 13.9019 7.70699 13.7069C8.09699 13.3169 8.09699 12.6839 7.70699 12.2929L3.41399 7.99988H16C16.553 7.99988 17 7.55288 17 6.99988C17 6.44688 16.553 5.99988 16 5.99988Z",fill:"black"}})])},r=[],i=s("2877"),n={},c=Object(i["a"])(n,a,r,!1,null,null,null);t["a"]=c.exports},fa6a:function(e,t,s){}}]);
//# sourceMappingURL=chunk-85706024.fffbe079.js.map